

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  

  <title>synthpops.plot_tools module &mdash; SynthPops  documentation</title>
  



<meta name="robots" content="none">
<meta http-equiv="refresh" content="0; URL=https://docs.idmod.org/projects/synthpops/en/latest/synthpops.plot_tools.html">




  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within SynthPops  documentation"
          href="_static/opensearch.xml"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="synthpops.read_write module" href="synthpops.read_write.html" />
    <link rel="prev" title="synthpops.long_term_care_facilities module" href="synthpops.long_term_care_facilities.html" />

<link href="https://fonts.googleapis.com/css?family=Lato|Montserrat|Open+Sans" rel="stylesheet">


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> SynthPops
          

          
            
            <img src="_static/IDM_white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">SynthPops overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithm.html">SynthPops algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using SynthPops</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="synthpops.api.html">synthpops.api module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.base.html">synthpops.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.config.html">synthpops.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.contact_networks.html">synthpops.contact_networks module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.contact_networks_industries.html">synthpops.contact_networks_industries module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.contacts.html">synthpops.contacts module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.data_distributions.html">synthpops.data_distributions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.long_term_care_facilities.html">synthpops.long_term_care_facilities module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">synthpops.plot_tools module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.read_write.html">synthpops.read_write module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.sampling.html">synthpops.sampling module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.school_modules.html">synthpops.school_modules module</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpops.version.html">synthpops.version module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SynthPops</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          





<div aria-label="breadcrumbs navigation" role="navigation">
    <ul class="wy-breadcrumbs">
        <li><a href="https://idmod.org/documentation">IDM docs</a> &raquo;</li>
        <li><a href="index.html">SynthPops</a> &raquo;</li>
        
        <li><a href="modules.html">API reference</a> &raquo;</li>
        
        <li>synthpops.plot_tools module</li>
        <li class="wy-breadcrumbs-aside">
            
            
            
        </li>
    </ul>
    <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-synthpops.plot_tools">
<span id="synthpops-plot-tools-module"></span><h1>synthpops.plot_tools module<a class="headerlink" href="#module-synthpops.plot_tools" title="Permalink to this headline">¶</a></h1>
<p>This module plots the age-specific contact matrix in different settings.</p>
<dl class="py function">
<dt id="synthpops.plot_tools.calculate_contact_matrix">
<code class="sig-prename descclassname">synthpops.plot_tools.</code><code class="sig-name descname">calculate_contact_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">population</span></em>, <em class="sig-param"><span class="n">density_or_frequency</span><span class="o">=</span><span class="default_value">'density'</span></em>, <em class="sig-param"><span class="n">setting_code</span><span class="o">=</span><span class="default_value">'H'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#synthpops.plot_tools.calculate_contact_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the symmetric age-specific contact matrix from the connections
for all people in the population. density_or_frequency sets the type of
contact matrix calculated.</p>
<p>When density_or_frequency is set to ‘frequency’ each person is assumed to
have a fixed amount of contact with others they are connected to in a
setting so each person will split their contact amount equally among their
connections. This means that if a person has links to 4 other individuals
then 1/4 will be added to the matrix element matrix[age_i][age_j] for each
link, where age_i is the age of the individual and age_j is the age of the
contact. This follows the mass action principle such that increased density
or number of people a person is in contact with leads to decreased per-link
or connection contact rate.</p>
<p>When density_or_frequency is set to ‘density’ the amount of contact each
person has with others scales with the number of people they are connected
to. This means that a person with connections to 4 individuals has a higher
total contact rate than a person with connection to 3 individuals. For this
definition if a person has links to 4 other individuals then 1 will be
added to the matrix element matrix[age_i][age_j] for each contact. This
follows the ‘pseudo’mass action principle such that the per-link or
connection contact rate is constant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>population</strong> (<em>dict</em>) – A dictionary of a population with attributes.</p></li>
<li><p><strong>density_or_frequency</strong> (<em>str</em>) – option for the type of contact matrix calculated.</p></li>
<li><p><strong>setting_code</strong> (<em>str</em>) – name of the physial contact setting: H for households, S for schools, W for workplaces, C for community or other, and ‘lTCF’ for long term care facilities</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Symmetric age specific contact matrix.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="synthpops.plot_tools.plot_contact_matrix">
<code class="sig-prename descclassname">synthpops.plot_tools.</code><code class="sig-name descname">plot_contact_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">matrix</span></em>, <em class="sig-param"><span class="n">age_count</span></em>, <em class="sig-param"><span class="n">aggregate_age_count</span></em>, <em class="sig-param"><span class="n">age_brackets</span></em>, <em class="sig-param"><span class="n">age_by_brackets_dic</span></em>, <em class="sig-param"><span class="n">setting_code</span><span class="o">=</span><span class="default_value">'H'</span></em>, <em class="sig-param"><span class="n">density_or_frequency</span><span class="o">=</span><span class="default_value">'density'</span></em>, <em class="sig-param"><span class="n">logcolors_flag</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">aggregate_flag</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">cmap</span><span class="o">=</span><span class="default_value">'cmr.freeze_r'</span></em>, <em class="sig-param"><span class="n">fontsize</span><span class="o">=</span><span class="default_value">16</span></em>, <em class="sig-param"><span class="n">rotation</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">title_prefix</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#synthpops.plot_tools.plot_contact_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the age specific contact matrix where the matrix element matrix_ij is the contact rate or frequency
for the average individual in age group i with all of their contacts in age group j. Can either be density
or frequency definition, as well as a single year age contact matrix or a contact matrix for aggregated
age brackets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matrix</strong> (<em>np.array</em>) – symmetric contact matrix, element ij is the contact for an average individual in age group i with all of their contacts in age group j</p></li>
<li><p><strong>age_count</strong> (<em>dict</em>) – dictionary with the count of individuals in the population for each age</p></li>
<li><p><strong>aggregate_age_count</strong> (<em>dict</em>) – dictionary with the count of individuals in the population in each age bracket</p></li>
<li><p><strong>age_brackets</strong> (<em>dict</em>) – dictionary mapping age bracket keys to age bracket range</p></li>
<li><p><strong>age_by_brackets_dic</strong> (<em>dict</em>) – dictionary mapping age to the age bracket range it falls in</p></li>
<li><p><strong>setting_code</strong> (<em>str</em>) – name of the physial contact setting: H for households, S for schools, W for workplaces, C for community or other</p></li>
<li><p><strong>density_or_frequency</strong> (<em>str</em>) – If ‘density’, then each contact counts for 1/(group size -1) of a person’s contact in a group, elif ‘frequency’ then count each contact. This means that more people in a group leads to higher rates of contact/exposure.</p></li>
<li><p><strong>logcolors_flag</strong> (<em>bool</em>) – If True, plot heatmap in logscale</p></li>
<li><p><strong>aggregate_flag</strong> (<em>book</em>) – If True, plot the contact matrix for aggregate age brackets, else single year age contact matrix.</p></li>
<li><p><strong>cmap</strong> (<em>str</em><em> or </em><em>matplotlib colormap</em>) – colormap</p></li>
<li><p><strong>fontsize</strong> (<em>int</em>) – base font size</p></li>
<li><p><strong>rotation</strong> (<em>int</em>) – rotation for x axis labels</p></li>
<li><p><strong>title_prefix</strong> (<em>str</em>) – optional title prefix for the figure</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A fig object.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the long term care facilities you may want the age count and the aggregate age count to only consider those who live or work in long term care facilities because otherwise this will be the whole population wide average mixing in that setting</p>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="synthpops.read_write.html" class="btn btn-neutral float-right" title="synthpops.read_write module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="synthpops.long_term_care_facilities.html" class="btn btn-neutral float-left" title="synthpops.long_term_care_facilities module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Bill &amp; Melinda Gates Foundation. All rights reserved.

    </p>
  </div>
<p>SynthPops is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode">Creative Commons
    Attribution-Noncommercial-ShareAlike 4.0 License</a>.</p>
<p>Send documentation feedback to <a href="mailto:feedback@idmod.org" target="_top">feedback@idmod.org</a>. If you have
    questions, email <a href="mailto:support@idmod.org" target="_top">support@idmod.org</a>.</p>
<p><a href="https://www.gatesfoundation.org/Privacy-and-Cookies-Notice">Privacy and Cookies Notice</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
<a href="https://www.gatesfoundation.org/Terms-of-Use">Terms of Use</a></p>


</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>